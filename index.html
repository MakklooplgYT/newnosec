<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="X-Frame-Bypass: Web Component extending IFrame to bypass X-Frame-Options: deny/sameorigin">
	<title>X-Frame-Bypass Web Component Demo</title>
	<style>
		html, body {
			margin: 0;
			padding: 0;
			height: 100%;
			overflow: hidden;
		}
		iframe {
			display: block;
			width: calc(100% - 40px);
			height: calc(100% - 40px);
			margin: 20px;
		}
		img {
			position: absolute;
			top: 0;
			right: 0;
		}
		#editButtonContainer {
			display: flex;
			justify-content: center;
			margin-top: 10px;
		}
		#editButton {
			padding: 10px 20px;
			background-color: #4CAF50;
			border: none;
			color: white;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			cursor: pointer;
		}
		#editCodeContainer {
			display: none;
			margin-top: 10px;
		}
		#codeTextArea {
			width: 100%;
			height: 100px;
		}
	</style>
	<script src="https://unpkg.com/@ungap/custom-elements-builtin"></script>
	<script src="x-frame-bypass.js" type="module"></script>
	<script>
		function editCode() {
			var editButton = document.getElementById('editButton');
			var codeContainer = document.getElementById('editCodeContainer');
			var codeTextArea = document.getElementById('codeTextArea');
			var injectButton = document.getElementById('injectButton');
			var code = injectButton.getAttribute('data-code');
			
			editButton.style.display = 'none';
			codeContainer.style.display = 'block';
			codeTextArea.value = code;
			injectButton.innerText = 'Update';
			injectButton.setAttribute('onclick', 'updateCode()');
		}
		
		function updateCode() {
			var codeTextArea = document.getElementById('codeTextArea');
			var injectButton = document.getElementById('injectButton');
			
			var code = codeTextArea.value;
			injectButton.setAttribute('data-code', code);
			
			alert('Code updated successfully!');
			
			var editButton = document.getElementById('editButton');
			var codeContainer = document.getElementById('editCodeContainer');
			
			editButton.style.display = 'inline-block';
			codeContainer.style.display = 'none';
			injectButton.innerText = 'Inject';
			injectButton.setAttribute('onclick', 'injectCode()');
		}
		
		function injectCode() {
			var injectButton = document.getElementById('injectButton');
			var code = injectButton.getAttribute('data-code');
			
			eval(code);
		}
	</script>
</head>
<body>
	<iframe is="x-frame-bypass" src="https://news.ycombinator.com/"></iframe>
	<a href="https://github.com/niutech/x-frame-bypass"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
	<div id="editButtonContainer">
		<button id="editButton" onclick="editCode()">Edit</button>
	</div>
	<div id="editCodeContainer">
		<textarea id="codeTextArea" placeholder="Paste your JavaScript bookmarklet code here"></textarea>
	</div>
	<button id="injectButton" data-code="alert('Initial code');"
		onclick="injectCode()">Inject</button>
</body>
</html>
